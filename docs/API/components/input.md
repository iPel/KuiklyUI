# Input(å•è¡Œè¾“å…¥æ¡†)

``Input``ç»„ä»¶ä¸ºå•è¡Œè¾“å…¥æ¡†

[ç»„ä»¶ä½¿ç”¨ç¤ºä¾‹](https://github.com/Tencent-TDS/KuiklyUI/tree/main/demo/src/commonMain/kotlin/com/tencent/kuikly/demo/pages/demo/InputViewDemoPage.kt)

## å±æ€§

æ”¯æŒæ‰€æœ‰[åŸºç¡€å±æ€§](basic-attr-event.md#åŸºç¡€å±æ€§)

### textæ–¹æ³•

ä½œç”¨å’Œ``Text``ç»„ä»¶çš„[textå±æ€§æ–¹æ³•ä¸€è‡´](text.md#textæ–¹æ³•)

### fontSizeæ–¹æ³•

ä½œç”¨å’Œ``Text``ç»„ä»¶çš„[fontSizeå±æ€§æ–¹æ³•ä¸€è‡´](text.md#fontSizeæ–¹æ³•)

### fontWeightNormalæ–¹æ³•

ä½œç”¨å’Œ``Text``ç»„ä»¶çš„[fontWeightNormalå±æ€§æ–¹æ³•ä¸€è‡´](text.md#fontWeightNormalæ–¹æ³•)

### fontWeightBoldæ–¹æ³•

ä½œç”¨å’Œ``Text``ç»„ä»¶çš„[fontWeightBoldå±æ€§æ–¹æ³•ä¸€è‡´](text.md#fontWeightBoldæ–¹æ³•)

### coloræ–¹æ³•

æŒ‡å®šè¾“å…¥æ¡†è¾“å…¥æ–‡æœ¬çš„é¢œè‰², ä½œç”¨å’Œ``Text``ç»„ä»¶çš„[colorå±æ€§æ–¹æ³•ä¸€è‡´](text.md#coloræ–¹æ³•)

### textAlignLeftæ–¹æ³•

ä½œç”¨å’Œ``Text``ç»„ä»¶çš„[textAlignLeftå±æ€§æ–¹æ³•ä¸€è‡´](text.md#textAlignLeftæ–¹æ³•)

### textAlignCenteræ–¹æ³•

ä½œç”¨å’Œ``Text``ç»„ä»¶çš„[textAlignCenterå±æ€§æ–¹æ³•ä¸€è‡´](text.md#textAlignCenteræ–¹æ³•)

### textAlignRightæ–¹æ³•

ä½œç”¨å’Œ``Text``ç»„ä»¶çš„[textAlignRightå±æ€§æ–¹æ³•ä¸€è‡´](text.md#textAlignRightæ–¹æ³•)

### keyboardTypePasswordæ–¹æ³•

è®¾ç½®è¾“å…¥æ¡†çš„å†…å®¹ç±»å‹ä¸ºå¯†ç ç±»å‹

### keyboardTypeNumberæ–¹æ³•

è®¾ç½®è¾“å…¥æ¡†çš„å†…å®¹ç±»å‹ä¸ºæ•°å­—ç±»å‹

### keyboardTypeEmailæ–¹æ³•

è®¾ç½®è¾“å…¥æ¡†çš„å†…å®¹ç±»å‹ä¸ºé‚®ä»¶ç±»å‹

### returnKeyTypeSearchæ–¹æ³•

è®¾ç½®è¾“å…¥æ³•çš„ä¸‹ä¸€æ­¥æŒ‰é’®ç±»å‹ä¸ºæœç´¢ç±»å‹

### returnKeyTypeSendæ–¹æ³•

è®¾ç½®è¾“å…¥æ³•çš„ä¸‹ä¸€æ­¥æŒ‰é’®ç±»å‹ä¸ºå‘é€ç±»å‹

### returnKeyTypeDoneæ–¹æ³•

è®¾ç½®è¾“å…¥æ³•çš„ä¸‹ä¸€æ­¥æŒ‰é’®ç±»å‹ä¸ºå®Œæˆç±»å‹

### returnKeyTypeNextæ–¹æ³•

è®¾ç½®è¾“å…¥æ³•çš„ä¸‹ä¸€æ­¥æŒ‰é’®ç±»å‹ä¸ºä¸‹ä¸€æ­¥ç±»å‹

### returnKeyTypeContinueæ–¹æ³•<Badge text="ä»…iOS" type="warn"/>

è®¾ç½®è¾“å…¥æ³•çš„ä¸‹ä¸€æ­¥æŒ‰é’®ç±»å‹ä¸ºç»§ç»­ç±»å‹

### returnKeyTypeGoæ–¹æ³•

è®¾ç½®è¾“å…¥æ³•çš„ä¸‹ä¸€æ­¥æŒ‰é’®ç±»å‹ä¸ºå‰å¾€ç±»å‹

### returnKeyTypeGoogleæ–¹æ³•<Badge text="ä»…iOS" type="warn"/>

è®¾ç½®è¾“å…¥æ³•çš„ä¸‹ä¸€æ­¥æŒ‰é’®ç±»å‹ä¸ºè°·æ­Œç±»å‹

### enablesReturnKeyAutomaticallyæ–¹æ³•<Badge text="ä»…iOS" type="warn"/>

è‡ªå®šæ ¹æ®å†…å®¹ç¦ç”¨å’Œå¯ç”¨iOSè½¯ä»¶ç›˜çš„Return Key

### enablePinyinCallbackæ–¹æ³•<Badge text="ä»…iOS" type="warn"/>

æ˜¯å¦å¯ç”¨æ‹¼éŸ³è¾“å…¥å›è°ƒã€‚å½“è®¾ç½®ä¸º `true` æ—¶ï¼Œåœ¨æ‹¼éŸ³è¾“å…¥è¿‡ç¨‹ä¸­ï¼ˆæœªç¡®è®¤é€‰æ‹©æ±‰å­—æ—¶ï¼‰ä¹Ÿä¼šè§¦å‘ `textDidChange` å›è°ƒã€‚

### imeNoFullscreenæ–¹æ³•<Badge text="ä»…Android" type="warn"/>

æ§åˆ¶æ¨ªå±çŠ¶æ€ä¸‹IMEè¾“å…¥æ³•æ˜¯å¦è¿›å…¥å…¨å±æ¨¡å¼

### returnKeyTypeContinueæ–¹æ³•<Badge text="ä»…iOS" type="warn"/>

è®¾ç½®è¾“å…¥æ³•çš„ä¸‹ä¸€æ­¥æŒ‰é’®ç±»å‹ä¸ºç»§ç»­ç±»å‹

### returnKeyTypeGoæ–¹æ³•

è®¾ç½®è¾“å…¥æ³•çš„ä¸‹ä¸€æ­¥æŒ‰é’®ç±»å‹ä¸ºå‰å¾€ç±»å‹

### returnKeyTypeGoogleæ–¹æ³•<Badge text="ä»…iOS" type="warn"/>

è®¾ç½®è¾“å…¥æ³•çš„ä¸‹ä¸€æ­¥æŒ‰é’®ç±»å‹ä¸ºè°·æ­Œç±»å‹

### placeholderæ–¹æ³•<Badge text="å¾®ä¿¡å°ç¨‹åºå®ç°ä¸­" type="warn"/>

è®¾ç½®è¾“å…¥æ¡†çš„æç¤ºæ–‡æœ¬

<div class="table-01">

**placeholderæ–¹æ³•**

| å‚æ•°  | æè¿°     | ç±»å‹ |
|:----|:-------|:--|
| placeholder | æç¤ºæ–‡æœ¬å€¼  | String |

</div>

:::tabs

@tab:active ç¤ºä¾‹

```kotlin{12}
@Page("demo_page")
internal class TestPage : BasePager() {
    override fun body(): ViewBuilder {
        return {
            attr {
                allCenter()
            }

            Input {
                attr {
                    size(200f, 40f)
                    placeholder("è¾“å…¥æ¡†æç¤º")
                }
            }
        }
    }
}
```

@tab æ•ˆæœ

<div align="center">
<img src="./img/input_place_holder.png" style="width: 30%; border: 1px gray solid">
</div>

:::

### placeholderColor <Badge text="å¾®ä¿¡å°ç¨‹åºå®ç°ä¸­" type="warn"/>

è®¾ç½®è¾“å…¥æ¡†æç¤ºæ–‡æœ¬é¢œè‰²

<div class="table-01">

**placeholderColorå±æ€§æ–¹æ³•**

| å‚æ•°  | æè¿°     | ç±»å‹ |
|:----|:-------|:--|
| color | æç¤ºæ–‡æœ¬é¢œè‰²  | Long `|` Color |

</div>

:::tabs

@tab:active ç¤ºä¾‹

```kotlin{13}
@Page("demo_page")
internal class TestPage : BasePager() {
    override fun body(): ViewBuilder {
        return {
            attr {
                allCenter()
            }

            Input {
                attr {
                    size(200f, 40f)
                    placeholder("è¾“å…¥æ¡†æç¤º")
                    placeholderColor(Color.BLUE)
                }
            }
        }
    }
}
```

@tab æ•ˆæœ

<div align="center">
<img src="./img/input_place_holder_color.png" style="width: 30%; border: 1px gray solid">
</div>

:::

### tintColoræ–¹æ³• <Badge text="å¾®ä¿¡å°ç¨‹åºå®ç°ä¸­" type="warn"/>

è®¾ç½®è¾“å…¥æ¡†å…‰æ ‡é¢œè‰²

<div class="table-01">

**tintColoræ–¹æ³•**

| å‚æ•°  | æè¿°     | ç±»å‹ |
|:----|:-------|:--|
| color | è¾“å…¥æ¡†å…‰æ ‡é¢œè‰²  | Long `|` Color |

</div>

:::tabs

@tab:active ç¤ºä¾‹

```kotlin{13}
@Page("demo_page")
internal class TestPage : BasePager() {
    override fun body(): ViewBuilder {
        return {
            attr {
                allCenter()
            }

            Input {
                attr {
                    size(200f, 40f)
                    placeholder("è¾“å…¥æ¡†æç¤º")
                    tintColor(Color.RED)
                }
            }
        }
    }
}
```

@tab æ•ˆæœ

<div align="center">
<img src="./img/input_tint_color.png" style="width: 30%; border: 1px gray solid">
</div>

:::

### maxTextLength

é™åˆ¶è¾“å…¥æ¡†çš„è¾“å…¥é•¿åº¦ã€‚æ”¯æŒä¸‰ç§é•¿åº¦é™åˆ¶ç±»å‹ï¼šæŒ‰å­—èŠ‚è®¡ç®—ã€æŒ‰å­—ç¬¦è®¡ç®—ã€æŒ‰è§†è§‰å®½åº¦è®¡ç®—ã€‚

<div class="table-01">

**maxTextLengthæ–¹æ³•**

| å‚æ•°  | æè¿°     | ç±»å‹ |
|:----|:-------|:--|
| length | æœ€å¤§è¾“å…¥é•¿åº¦  | Int |
| type | é•¿åº¦é™åˆ¶ç±»å‹  | LengthLimitType |

</div>

**LengthLimitType æšä¸¾ç±»å‹**

| ç±»å‹  | å€¼ | è¯´æ˜     |
|:----|:--|:-------|
| BYTE | 0 | é™åˆ¶è¾“å…¥çš„é•¿åº¦æŒ‰å­—èŠ‚è®¡ç®— |
| CHARACTER | 1 | é™åˆ¶è¾“å…¥çš„é•¿åº¦æŒ‰å­—ç¬¦è®¡ç®— |
| VISUAL_WIDTH | 2 | é™åˆ¶è¾“å…¥çš„é•¿åº¦æŒ‰è§†è§‰å®½åº¦è®¡ç®— |

**é•¿åº¦è®¡ç®—ç¤ºä¾‹**

| ç¤ºä¾‹       | BYTE | CHARACTER | VISUAL_WIDTH | è¯´æ˜                                  |
|----------|------|-----------|--------------|-------------------------------------|
| `""`       | 0    | 0         | 0            | ç©ºå­—ç¬¦ä¸²ï¼š0                              |
| `"a"`      | 1    | 1         | 1            | è‹±æ–‡ï¼šUTF8å­—èŠ‚æ•°1ï¼Œå­—ç¬¦ä¸ªæ•°1ï¼Œè§†è§‰å®½åº¦1             |
| `"ä¸­"`      | 3    | 1         | 2            | ä¸­æ–‡ï¼šUTF8å­—èŠ‚æ•°3ï¼Œå­—ç¬¦ä¸ªæ•°1ï¼Œè§†è§‰å®½åº¦2             |
| `"ğŸ˜‚"`     | 4    | 1         | 2            | Emojiï¼šUTF8å­—èŠ‚æ•°4ï¼Œå­—ç¬¦ä¸ªæ•°1ï¼Œè§†è§‰å®½åº¦2          |
| `"[img]"` | 5    | 1         | 2            | ImageSpanï¼šæè¿°æ–‡æœ¬çš„UTF8å­—èŠ‚æ•°5ï¼Œå­—ç¬¦ä¸ªæ•°1ï¼Œè§†è§‰å®½åº¦2 |
| `"\u200B"` | 3    | 1         | 1            | ä¸å¯è§å­—ç¬¦ï¼šUTF8å­—èŠ‚æ•°3ï¼Œå­—ç¬¦ä¸ªæ•°1ï¼Œè§†è§‰å®½åº¦æŒ‰1è®¡ç®—       |

> æ³¨ï¼šVISUAL_WIDTHæ¨¡å¼ä¸‹ï¼Œæœªè¯†åˆ«å‡ºæ¥çš„ä¸å¯è§å­—ç¬¦å¯èƒ½ä¼šè¢«ç»Ÿè®¡ä¸º2

**ç¤ºä¾‹**

:::tabs

@tab:active æŒ‰å­—ç¬¦é™åˆ¶ï¼ˆæ¨èï¼‰

```kotlin{13}
@Page("demo_page")
internal class TestPage : BasePager() {
    override fun body(): ViewBuilder {
        return {
            attr {
                allCenter()
            }

            Input {
                attr {
                    size(200f, 40f)
                    placeholder("è¾“å…¥æ¡†æç¤º")
                    maxTextLength(20, LengthLimitType.CHARACTER) // é™åˆ¶æœ€å¤šè¾“å…¥20ä¸ªå­—ç¬¦
                }
            }
        }
    }
}
```

@tab æŒ‰å­—èŠ‚é™åˆ¶

```kotlin{13}
@Page("demo_page")
internal class TestPage : BasePager() {
    override fun body(): ViewBuilder {
        return {
            attr {
                allCenter()
            }

            Input {
                attr {
                    size(200f, 40f)
                    placeholder("è¾“å…¥æ¡†æç¤º")
                    maxTextLength(20, LengthLimitType.BYTE) // é™åˆ¶æœ€å¤šè¾“å…¥20ä¸ªå­—èŠ‚
                }
            }
        }
    }
}
```

@tab æŒ‰è§†è§‰å®½åº¦é™åˆ¶

```kotlin{13}
@Page("demo_page")
internal class TestPage : BasePager() {
    override fun body(): ViewBuilder {
        return {
            attr {
                allCenter()
            }

            Input {
                attr {
                    size(200f, 40f)
                    placeholder("è¾“å…¥æ¡†æç¤º")
                    maxTextLength(20, LengthLimitType.VISUAL_WIDTH) // é™åˆ¶æœ€å¤šè¾“å…¥è§†è§‰å®½åº¦ä¸º20
                }
            }
        }
    }
}
```

@tab å·²åºŸå¼ƒçš„å•å‚æ•°ç”¨æ³•

```kotlin{13}
@Page("demo_page")
internal class TestPage : BasePager() {
    override fun body(): ViewBuilder {
        return {
            attr {
                allCenter()
            }

            Input {
                attr {
                    size(200f, 40f)
                    placeholder("è¾“å…¥æ¡†æç¤º")
                    @Suppress("DEPRECATION")
                    maxTextLength(20) // å·²åºŸå¼ƒï¼Œå»ºè®®ä½¿ç”¨ maxTextLength(20, LengthLimitType.CHARACTER)
                }
            }
        }
    }
}
```

:::

### autofocusæ–¹æ³•

æ˜¯å¦è‡ªåŠ¨è·å–ç„¦ç‚¹, è·å–ç„¦ç‚¹åä¼šè§¦å‘è½¯é”®ç›˜çš„å¼¹èµ·

<div class="table-01">

**autofocusæ–¹æ³•**

| å‚æ•°  | æè¿°     | ç±»å‹ |
|:----|:-------|:--|
| focus | æ˜¯å¦è‡ªåŠ¨è·å–ç„¦ç‚¹  | Boolean |

</div>

**ç¤ºä¾‹**

```kotlin{13}
@Page("demo_page")
internal class TestPage : BasePager() {
    override fun body(): ViewBuilder {
        return {
            attr {
                allCenter()
            }

            Input {
                attr {
                    size(200f, 40f)
                    placeholder("è¾“å…¥æ¡†æç¤º")
                    autofocus(true)
                }
            }
        }
    }
}
```

### editableæ–¹æ³•

æ˜¯å¦å¯ç¼–è¾‘


<div class="table-01">

**editableæ–¹æ³•**

| å‚æ•°  | æè¿°     | ç±»å‹ |
|:----|:-------|:--|
| editable | æ˜¯å¦å¯ç¼–è¾‘  | Boolean |

</div>

**ç¤ºä¾‹**

```kotlin{13}
@Page("demo_page")
internal class TestPage : BasePager() {
    override fun body(): ViewBuilder {
        return {
            attr {
                allCenter()
            }

            Input {
                attr {
                    size(200f, 40f)
                    placeholder("è¾“å…¥æ¡†æç¤º")
                    editable(false) // ä¸å¯ç¼–è¾‘
                }
            }
        }
    }
}
```

### inputSpansæ–¹æ³•<Badge text="é¸¿è’™å®ç°ä¸­" type="warn"/><Badge text="H5å®ç°ä¸­" type="warn"/> <Badge text="å¾®ä¿¡å°ç¨‹åºå®ç°ä¸­" type="warn"/>

è®¾ç½®è¾“å…¥æ–‡æœ¬çš„æ–‡æœ¬æ ·å¼é…åˆ`textDidChange`æ¥æ›´æ”¹`spans`å®ç°è¾“å…¥æ¡†å¯Œæ–‡æœ¬åŒ–ã€‚


<div class="table-01">

**inputSpansæ–¹æ³•**

| å‚æ•°  | æè¿°     | ç±»å‹ |
|:----|:-------|:--|
| spans | å¯Œæ–‡æœ¬æ ·å¼  | InputSpans |

</div>

`InputSpans`å¯ä»¥é€šè¿‡`addSpan`æ¥æ·»åŠ `InputSpan`æ ·å¼ã€‚`InputSpan`å¯ç”¨æ¥è®¾ç½®`Input`çš„æ–‡æœ¬æ ·å¼ï¼Œè¯¦ç»†ä½¿ç”¨æ–¹æ³•è§ä»¥ä¸‹ç¤ºä¾‹ï¼š

**ç¤ºä¾‹**

:::tabs

@tab:active ç¤ºä¾‹

```kotlin{18}
@Page("demo_page")
internal class TestPage : BasePager() {
    var spans by observable(InputSpans())
    lateinit var ref: ViewRef<InputView>
    
    override fun body(): ViewBuilder {
        val ctx = this
        return {
            attr {
                allCenter()
            }
            Input {
                ref {
                    ctx.ref = it
                }
                attr {
                    size(pagerData.pageViewWidth, 400f)
                    inputSpans(ctx.spans)
                    backgroundColor(Color.GREEN)
                }
                event {
                    textDidChange(true) { it ->
                        val hightSpan = {
                            InputSpan().apply {
                                color(Color.RED)
                                if (it.text.length <= 10) {
                                    text(it.text)
                                } else {
                                    text(it.text.substring(0, 10))
                                }
                                fontSize(30f)
                            }
                        }
                        val normalSpan = {
                            InputSpan().apply {
                                color(Color.BLACK)
                                text(it.text.substring(10, it.text.length))
                                fontSize(20f)
                            }
                        }
                        val spans = InputSpans()

                        if (it.text.length <= 10) {
                            spans.addSpan(hightSpan.invoke())
                        } else {
                            spans.addSpan(hightSpan.invoke())
                            spans.addSpan(normalSpan.invoke())
                        }
                        ctx.spans = spans
                    }
                }
            }
        }
    }
}
```

@tab æ•ˆæœ

<div align="center">
<img src="./img/input_span.png" style="width: 30%; border: 1px gray solid">
</div>

:::



## äº‹ä»¶

æ”¯æŒæ‰€æœ‰[åŸºç¡€äº‹ä»¶](basic-attr-event.md#åŸºç¡€äº‹ä»¶)

### textDidChange

``textDidChange``äº‹ä»¶æ„ä¸ºè¾“å…¥æ¡†æ–‡æœ¬å˜åŒ–äº‹ä»¶ï¼Œå¦‚æœç»„ä»¶æœ‰è®¾ç½®è¯¥äº‹ä»¶äº‹ä»¶ï¼Œå½“``Input``ç»„ä»¶è¾“å…¥å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šè§¦å‘``textDidChange``é—­åŒ…å›è°ƒã€‚``textDidChange``é—­åŒ…ä¸­å«æœ‰
``InputParams``ç±»å‹å‚æ•°ï¼Œä»¥æ­¤æ¥æè¿°è¾“å…¥æ¡†æ–‡æœ¬å˜åŒ–äº‹ä»¶çš„ä¿¡æ¯

<div class="table-01">

**InputParams**

| å‚æ•°  | æè¿°     | ç±»å‹ |
|:----|:-------|:--|
| text | å½“å‰è¾“å…¥çš„æ–‡æœ¬  | String |
| length | å½“å‰æ–‡æœ¬é•¿åº¦ï¼ˆä¸ ``maxTextLength`` çš„ ``LengthLimitType`` ä¸€è‡´ï¼ŒæŒ‰å­—èŠ‚/å­—ç¬¦/è§†è§‰å®½åº¦è®¡ç®—ï¼‰ã€‚ä»…å½“è®¾ç½® ``maxTextLength`` åæœ‰æ•ˆï¼Œå¦åˆ™ä¸ºç©º<Badge text="2.15+" type="info"/> | Int? |

</div>

**ç¤ºä¾‹**

```kotlin{16-18}
@Page("demo_page")
internal class TestPage : BasePager() {
    override fun body(): ViewBuilder {
        return {
            attr {
                allCenter()
            }

            Input {
                attr {
                    size(200f, 40f)
                    placeholder("è¾“å…¥æ¡†æç¤º")
                }
                
                event { 
                    textDidChange { 
                        val text = it.text // å˜åŒ–åçš„æ–‡æœ¬
                    }
                }
            }
        }
    }
}
```

### inputFocus

``inputFocus``äº‹ä»¶æ„ä¸ºè¾“å…¥æ¡†è·å–åˆ°ç„¦ç‚¹äº‹ä»¶ï¼Œå¦‚æœç»„ä»¶æœ‰è®¾ç½®è¯¥äº‹ä»¶äº‹ä»¶ï¼Œå½“``Input``ç»„ä»¶è·å–åˆ°ç„¦ç‚¹æ—¶ï¼Œä¼šè§¦å‘``inputFocus``é—­åŒ…å›è°ƒã€‚``inputFocus``é—­åŒ…ä¸­å«æœ‰
``InputParams``ç±»å‹å‚æ•°ï¼Œä»¥æ­¤æ¥æè¿°è¾“å…¥æ¡†è·å–åˆ°ç„¦ç‚¹äº‹ä»¶çš„ä¿¡æ¯

**ç¤ºä¾‹**

```kotlin{16-18}
@Page("demo_page")
internal class TestPage : BasePager() {
    override fun body(): ViewBuilder {
        return {
            attr {
                allCenter()
            }

            Input {
                attr {
                    size(200f, 40f)
                    placeholder("è¾“å…¥æ¡†æç¤º")
                }

                event {
                    inputFocus { inputParams -> 
                        val text = inputParams.text
                    }
                }
            }
        }
    }
}
```

### inputBlur

``inputBlur``äº‹ä»¶æ„ä¸ºè¾“å…¥æ¡†å¤±å»ç„¦ç‚¹äº‹ä»¶ï¼Œå¦‚æœç»„ä»¶æœ‰è®¾ç½®è¯¥äº‹ä»¶äº‹ä»¶ï¼Œå½“``Input``ç»„ä»¶å¤±å»ç„¦ç‚¹æ—¶ï¼Œä¼šè§¦å‘``inputBlur``é—­åŒ…å›è°ƒã€‚``inputBlur``é—­åŒ…ä¸­å«æœ‰
``InputParams``ç±»å‹å‚æ•°ï¼Œä»¥æ­¤æ¥æè¿°è¾“å…¥æ¡†å¤±å»ç„¦ç‚¹äº‹ä»¶çš„ä¿¡æ¯

**ç¤ºä¾‹**

```kotlin{16-18}
@Page("demo_page")
internal class TestPage : BasePager() {
    override fun body(): ViewBuilder {
        return {
            attr {
                allCenter()
            }

            Input {
                attr {
                    size(200f, 40f)
                    placeholder("è¾“å…¥æ¡†æç¤º")
                }

                event {
                    inputBlur { inputParams ->
                        val text = inputParams.text
                    }
                }
            }
        }
    }
}
```

### keyboardHeightChange<Badge text="H5å®ç°ä¸­" type="warn"/> <Badge text="å¾®ä¿¡å°ç¨‹åºå®ç°ä¸­" type="warn"/>

``keyboardHeightChange``äº‹ä»¶æ„ä¸ºè½¯é”®ç›˜é«˜åº¦å˜åŒ–äº‹ä»¶ï¼Œå¦‚æœç»„ä»¶æœ‰è®¾ç½®è¯¥äº‹ä»¶äº‹ä»¶ï¼Œå½“è½¯é”®ç›˜é«˜åº¦å˜åŒ–æ—¶ï¼Œä¼šè§¦å‘``keyboardHeightChange``é—­åŒ…å›è°ƒã€‚``keyboardHeightChange``é—­åŒ…ä¸­å«æœ‰
``KeyboardParams``ç±»å‹å‚æ•°ï¼Œä»¥æ­¤æ¥æè¿°è½¯é”®ç›˜é«˜åº¦å˜åŒ–äº‹ä»¶çš„ä¿¡æ¯

<div class="table-01">

**KeyboardParams**

| å‚æ•°  | æè¿°     | ç±»å‹ |
|:----|:-------|:--|
| height | è½¯é”®ç›˜é«˜åº¦  | Float |
| duration | è½¯é”®ç›˜é«˜åº¦å˜åŒ–åŠ¨ç”»æ—¶é•¿ï¼ˆç§’ï¼‰  | Float |
| curve | iOSé”®ç›˜åŠ¨ç”»æ›²çº¿å€¼ï¼Œå¯ç”¨äº`Animation.keyboard()`å®ç°ä¸é”®ç›˜åŠ¨ç”»åŒæ­¥<Badge text="ä»…iOS" type="warn"/> | Int |

</div>

::: tip å¹³å°è¯´æ˜
- `curve` å‚æ•°ä»…åœ¨ iOS å¹³å°æœ‰æ•ˆï¼Œå…¶ä»–å¹³å°è¯¥å€¼ä¸ºé»˜è®¤å€¼ 0
- åœ¨é iOS å¹³å°ä½¿ç”¨ `Animation.keyboard()` æ—¶ï¼ŒåŠ¨ç”»æ•ˆæœç­‰åŒäº `Animation.linear()`
:::

**åŸºç¡€ç¤ºä¾‹**

```kotlin{16-18}
@Page("demo_page")
internal class TestPage : BasePager() {
    override fun body(): ViewBuilder {
        return {
            attr {
                allCenter()
            }

            Input {
                attr {
                    size(200f, 40f)
                    placeholder("è¾“å…¥æ¡†æç¤º")
                }

                event {
                    keyboardHeightChange { keyboardParams -> 
                        val height = keyboardParams.height
                        val duration = keyboardParams.duration
                        val curve = keyboardParams.curve
                    }
                }
            }
        }
    }
}
```

**è·¨å¹³å°é”®ç›˜åŠ¨ç”»æœ€ä½³å®è·µ**

æ¨èæ ¹æ®å¹³å°é€‰æ‹©åˆé€‚çš„åŠ¨ç”»ï¼š
- **iOS**ï¼šä½¿ç”¨`Animation.keyboard()`é…åˆ`curve`å‚æ•°å®ç°ä¸ç³»ç»Ÿé”®ç›˜åŠ¨ç”»å®Œç¾åŒæ­¥
- **å…¶ä»–å¹³å°**ï¼šä½¿ç”¨`Animation.easeInOut()`ç­‰é€šç”¨åŠ¨ç”»

```kotlin
@Page("demo_page")
internal class TestPage : BasePager() {
    var keyboardHeight: Float by observable(0f)
    var keyboardAnimation: Animation by observable(Animation.easeInOut(0.25f))
    
    override fun body(): ViewBuilder {
        val ctx = this
        return {
            Input {
                attr {
                    size(200f, 40f)
                    placeholder("è¾“å…¥æ¡†æç¤º")
                    transform(Translate(0f, -ctx.keyboardHeight))
                    animation(ctx.keyboardAnimation, ctx.keyboardHeight)
                }

                event {
                    keyboardHeightChange { params ->
                        ctx.keyboardAnimation = createKeyboardAnimation(params)
                        ctx.keyboardHeight = params.height
                    }
                }
            }
        }
    }
    
    // Create keyboard animation based on platform
    private fun createKeyboardAnimation(params: KeyboardParams): Animation {
        return if (PlatformUtils.isIOS()) {
            // iOS: Use native keyboard curve for perfect sync
            Animation.keyboard(params.duration, params.curve)
        } else {
            // Other platforms: Use easeInOut as fallback
            Animation.easeInOut(params.duration)
        }
    }
}
```

### inputReturn <Badge text="å¾®ä¿¡å°ç¨‹åºå®ç°ä¸­" type="warn"/>

``inputReturn``äº‹ä»¶æ„ä¸ºè½¯é”®ç›˜è§¦å‘äº†Returnäº‹ä»¶ï¼Œå¦‚æœç»„ä»¶æœ‰è®¾ç½®è¯¥äº‹ä»¶äº‹ä»¶ï¼Œå½“è½¯é”®ç›˜è§¦å‘äº†Returnäº‹ä»¶æ—¶ï¼Œä¼šè§¦å‘``inputReturn``é—­åŒ…å›è°ƒã€‚``inputReturn``é—­åŒ…ä¸­å«æœ‰
``InputParams``ç±»å‹å‚æ•°ï¼Œä»¥æ­¤æ¥æè¿°è½¯é”®ç›˜è§¦å‘äº†Returnäº‹ä»¶çš„ä¿¡æ¯

**ç¤ºä¾‹**

```kotlin{16-18}
@Page("demo_page")
internal class TestPage : BasePager() {
    override fun body(): ViewBuilder {
        return {
            attr {
                allCenter()
            }

            Input {
                attr {
                    size(200f, 40f)
                    placeholder("è¾“å…¥æ¡†æç¤º")
                }

                event {
                    onTextReturn { param ->

                    }
                }
            }
        }
    }
}
```

### textLengthBeyondLimit <Badge text="å¾®ä¿¡å°ç¨‹åºå®ç°ä¸­" type="warn"/>

``textLengthBeyondLimit``äº‹ä»¶æ„ä¸ºè¾“å…¥æ¡†å‘ç”Ÿäº†è¾“å…¥è¶…å‡ºæœ€å¤§è¾“å…¥å­—ç¬¦çš„äº‹ä»¶ï¼Œå¦‚æœç»„ä»¶æœ‰è®¾ç½®è¯¥äº‹ä»¶äº‹ä»¶ï¼Œå½“è¾“å…¥æ¡†å‘ç”Ÿäº†è¾“å…¥è¶…å‡ºæœ€å¤§è¾“å…¥å­—ç¬¦çš„äº‹ä»¶ï¼Œä¼šè§¦å‘``textLengthBeyondLimit``é—­åŒ…å›è°ƒã€‚``textLengthBeyondLimit``é—­åŒ…ä¸­å«æœ‰
``InputParams``ç±»å‹å‚æ•°ï¼Œä»¥æ­¤æ¥æè¿°è¾“å…¥æ¡†è§¦å‘äº†è¾“å…¥è¶…å‡ºæœ€å¤§è¾“å…¥å­—ç¬¦çš„äº‹ä»¶çš„ä¿¡æ¯

**ç¤ºä¾‹**

```kotlin{16-18}
@Page("demo_page")
internal class TestPage : BasePager() {
    override fun body(): ViewBuilder {
        return {
            attr {
                allCenter()
            }

            Input {
                attr {
                    size(200f, 40f)
                    placeholder("è¾“å…¥æ¡†æç¤º")
                }

                event {
                    textLengthBeyondLimit { param ->

                    }
                }
            }
        }
    }
}
```

## æ–¹æ³•

### setText

è®¾ç½®è¾“å…¥æ¡†çš„æ–‡æœ¬å€¼

<div class="table-01">

**setText**

| å‚æ•°  | æè¿°     | ç±»å‹ |
|:----|:-------|:--|
| text | æ–‡æœ¬  | String |

</div>

**ç¤ºä¾‹**

```kotlin{26-28}
@Page("demo_page")
internal class TestPage : BasePager() {

    lateinit var inputRef: ViewRef<InputView>

    override fun body(): ViewBuilder {
        val ctx = this
        return {
            attr {
                allCenter()
            }

            Input {
                ref {
                    ctx.inputRef = it
                }

                attr {
                    size(200f, 40f)
                    placeholder("è¾“å…¥æ¡†æç¤º")
                }
            }
        }
    }

    private fun setInputText() {
        inputRef.view?.setText("è®¾ç½®è¾“å…¥æ¡†æ–‡æœ¬")
    }
}
```

### focus

ä¸»åŠ¨è®©è¾“å…¥æ¡†è·å–ç„¦ç‚¹, ç„¦ç‚¹è·å–æˆåŠŸåï¼Œè½¯é”®ç›˜ä¼šè‡ªåŠ¨å¼¹èµ·

**ç¤ºä¾‹**

```kotlin{26-28}
@Page("demo_page")
internal class TestPage : BasePager() {

    lateinit var inputRef: ViewRef<InputView>

    override fun body(): ViewBuilder {
        val ctx = this
        return {
            attr {
                allCenter()
            }

            Input {
                ref {
                    ctx.inputRef = it
                }

                attr {
                    size(200f, 40f)
                    placeholder("è¾“å…¥æ¡†æç¤º")
                }
            }
        }
    }

    private fun focus() {
        inputRef.view?.focus()
    }
}
```

### blur

ä¸»åŠ¨è®©è¾“å…¥æ¡†å¤±å»ç„¦ç‚¹, ç„¦ç‚¹å¤±å»ä»¥åï¼Œè½¯é”®ç›˜ä¼šè‡ªåŠ¨æ”¶èµ·

**ç¤ºä¾‹**

```kotlin{26-28}
@Page("demo_page")
internal class TestPage : BasePager() {

    lateinit var inputRef: ViewRef<InputView>

    override fun body(): ViewBuilder {
        val ctx = this
        return {
            attr {
                allCenter()
            }

            Input {
                ref {
                    ctx.inputRef = it
                }

                attr {
                    size(200f, 40f)
                    placeholder("è¾“å…¥æ¡†æç¤º")
                }
            }
        }
    }

    private fun blur() {
        inputRef.view?.blur()
    }
}
```

### cursorIndex <Badge text="å°ç¨‹åºæ”¯æŒä¸­" type="warn"/>

è·å–å…‰æ ‡å½“å‰ä½ç½®

**ç¤ºä¾‹**

```kotlin{26-29}
@Page("demo_page")
internal class TestPage : BasePager() {

    lateinit var inputRef: ViewRef<InputView>

    override fun body(): ViewBuilder {
        val ctx = this
        return {
            attr {
                allCenter()
            }

            Input {
                ref {
                    ctx.inputRef = it
                }

                attr {
                    size(200f, 40f)
                    placeholder("è¾“å…¥æ¡†æç¤º")
                }
            }
        }
    }

    private fun getCursor() {
        ref.view?.cursorIndex {
            KLog.i("Input", "index: $it")
        }
    }
}
```

### setCursorIndex <Badge text="å°ç¨‹åºæ”¯æŒä¸­" type="warn"/>

è®¾ç½®å½“å‰å…‰æ ‡ä½ç½®

**setCursorIndex**

| å‚æ•°  | æè¿°     | ç±»å‹ |
|:----|:-------|:--|
| index | å…‰æ ‡ä½ç½®  | Int |

**ç¤ºä¾‹**

```kotlin{26-28}
@Page("demo_page")
internal class TestPage : BasePager() {

    lateinit var inputRef: ViewRef<InputView>

    override fun body(): ViewBuilder {
        val ctx = this
        return {
            attr {
                allCenter()
            }

            Input {
                ref {
                    ctx.inputRef = it
                }

                attr {
                    size(200f, 40f)
                    placeholder("è¾“å…¥æ¡†æç¤º")
                }
            }
        }
    }

    fun setCursorIndex(index: Int) {
        ref.view?.setCursorIndex(index)
    }
}
```





